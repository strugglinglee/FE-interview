(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{415:function(t,a,s){"use strict";s.r(a);var n=s(56),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),s("h2",{attrs:{id:"从输入-url-到页面加载完成-发生了什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从输入-url-到页面加载完成-发生了什么"}},[t._v("#")]),t._v(" 从输入 URL 到页面加载完成，发生了什么？")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("DNS 解析")]),t._v(":首先我们需要通过 DNS（域名解析系统）将 URL 解析为对应的 IP 地址")]),t._v(" "),s("li",[s("strong",[t._v("TCP 连接")]),t._v(":与这个 IP 地址确定的那台服务器建立起 TCP 网络连接")]),t._v(" "),s("li",[s("strong",[t._v("HTTP 请求抛出")]),t._v(":随后我们向服务端抛出我们的 HTTP 请求")]),t._v(" "),s("li",[s("strong",[t._v("服务端处理请求，HTTP 响应返回")]),t._v(":服务端处理完我们的请求之后，把目标数据放在 HTTP 响应里返回给客户端")]),t._v(" "),s("li",[s("strong",[t._v("浏览器拿到响应数据，解析响应内容，把解析的结果展示给用户")]),t._v(":拿到响应数据的浏览器就可以开始走一个渲染的流程，渲染完毕，页面便呈现给了用户，并时刻等待响应用户的操作")])]),t._v(" "),s("h2",{attrs:{id:"你做过哪些性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#你做过哪些性能优化"}},[t._v("#")]),t._v(" 你做过哪些性能优化")]),t._v(" "),s("h3",{attrs:{id:"从输入-url-到显示页面这个过程涉及到网络的层面的过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从输入-url-到显示页面这个过程涉及到网络的层面的过程"}},[t._v("#")]),t._v(" 从输入 URL 到显示页面这个过程涉及到网络的层面的过程")]),t._v(" "),s("ol",[s("li",[t._v("DNS 解析")]),t._v(" "),s("li",[t._v("TCP 连接")]),t._v(" "),s("li",[t._v("HTTP 请求/响应: 减少请求次数/减少单次请求所花费的时间")])]),t._v(" "),s("h3",{attrs:{id:"webpack-优化方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-优化方案"}},[t._v("#")]),t._v(" webpack 优化方案")]),t._v(" "),s("p",[t._v("优化瓶颈:")]),t._v(" "),s("ul",[s("li",[t._v("webpack 的构建过程太花时间")]),t._v(" "),s("li",[t._v("webpack 打包的结果体积太大")])]),t._v(" "),s("p",[t._v("常见优化方式:")]),t._v(" "),s("ol",[s("li",[t._v("用 include 或 exclude 来帮我们避免不必要的转译")]),t._v(" "),s("li",[s("strong",[t._v("DllPlugin")]),t._v("\n基于 Windows 动态链接库（dll）的思想被创作出来的\n会把第三方库单独打包到一个文件中，这个文件就是一个单纯的依赖库\n这个依赖库不会跟着你的业务代码一起被重新打包，只有当依赖自身发生版本变化时才会重新打包")]),t._v(" "),s("li",[t._v("Happypack——将 loader "),s("strong",[t._v("由单进程转为多进程")]),t._v("\n充分释放 CPU 在多核并发方面的优势，帮我们把任务分解给多个子进程去并发执行，大大提升打包效率")]),t._v(" "),s("li",[t._v("文件结构可视化，找出导致体积过大的原因: "),s("strong",[t._v("包组成可视化工具")]),t._v("——webpack-bundle-analyzer")]),t._v(" "),s("li",[s("strong",[t._v("按需加载")]),t._v("\nwebpack配置文件--指定 chunkFilename")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/../dist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("publicPath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" defaultSettings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("publicPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定 chunkFilename")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunkFilename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].[chunkhash:5].chunk.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[t._v("路由处的代码也要做一下配合")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("getComponent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pages/BugComponent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bug'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[t._v("前端资源的加载优化\n使用DataURL\n将小图片转换为base64编码，用DataURL来引用它，将图片变成编码和代码文件打包到一起，同样可以减少小图片请求数量的效果\n方法:处理文件时指定一个大小，当文件小于这个配置时，url-loader会将其转换为一个base64编码的DataURL\n图片压缩(image-webpack-loader)\n配置html-webpack-plugin插件\n配置压缩HTML的配置，压缩HTML中的代码\nminifyCSS开启\nminifyJS开启\npostcss-loader插件压缩CSS代码")]),t._v(" "),s("li",[t._v("优化JS代码\nTree shaking移除js中的无用代码\n使用 TerserPlugin 后，Terser 会移除那些没有对外暴露且没有额外副作用的方法，来减小构建出来的代码体积\nsideEffects\n移除的是无用的模块或者代码文件")])])])}),[],!1,null,null,null);a.default=r.exports}}]);